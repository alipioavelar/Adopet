 <!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1. 0">
  <link rel="stylesheet" href="cadastro_animal.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
    rel="stylesheet">

  <title>Adopet</title>
</head>

<body>
  <nav class="navbar">
    <div class="container">
      <div class="logo">
        <img src="images/logo.png" alt="">
        <h1>Adopet</h1>
      </div>
      <ul class="nav-links">
        <li><a href="#">Minha Conta</a></li>
        <li><a href="meus_cachorros.html">Meus Cachorros</a></li>
      </ul>
    </div>
  </nav>
  <h1 id="titulo">Cadastro do Animal</h1>
  <form id="form">
    <fieldset class="grupo">
      <p id="subtitulo">Preencha os dados</p>

      <div class="campo">
        <label for="nome" class="apr">Nome (opcional)</label>
        <input type="text" name="Nome (opcional)" id="nome">
      </div>

      <div class="campo">
        <label for="idade" class="apr">Idade (opcional)</label>
        <input type="text" name="Idade do animal (opcional)" id="idade">
      </div>

      <div class="campo">
        <label for="peso" class="apr">Peso</label>
        <input type="text" name="Peso do animal" id="peso">
      </div>

      <div class="campo">
        <label for="endereço" class="apr">Endereço de Busca</label>
        <input type="text" name="Endereço" required id="endereco">
      </div>

      <div class="campo">
        <label for="raça" class="apr">Raça</label>
        <input type="text" name="Digite a raça do animal" id="raca">
      </div>

      <div class="campo">
        <label for="whatsapp" class="apr">WhatsApp</label>
        <input type="text" name="Digite seu número" required id="whatsapp">
      </div>
      <div class="persona">
        <label for="personalidade" class="apr">Personalidade</label>
        <input type="text" id="personalidade">
      </div>
      <div class="campo">
        <label for="descrição" class="apr">Descrição</label>
        <input type="text" name="descrição" id="descricao">
      </div>

      <div>
        <label for="fotos" class="apr">Envie fotos do animal</label>
        <br>
        <input type="file" id="foto" required>
      </div>

      <div id="botão">
        <button type="button" class="bnt" onclick="salvarAnimal()">Concluir Cadastro</button>
      </div>
    </fieldset>
  </form>

  <script>

function redimensionarImagem(file, maxWidth, maxHeight, callback) {
  const reader = new FileReader();
  reader.onload = function(event) {
    const img = new Image();
    img.onload = function() {
      const canvas = document.createElement('canvas');
      let width = img.width;
      let height = img.height;

      if (width > height) {
        if (width > maxWidth) {
          height *= maxWidth / width;
          width = maxWidth;
        }
      } else {
        if (height > maxHeight) {
          width *= maxHeight / height;
          height = maxHeight;
        }
      }

      canvas.width = width;
      canvas.height = height;

      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0, width, height);

      callback(canvas.toDataURL(file.type));
    };
    img.src = event.target.result;
  };
  reader.readAsDataURL(file);
}







    
    function salvarAnimal() {
  const nome = document.getElementById('nome').value;
  let id = parseInt(localStorage.getItem('lastAnimalId')) || 0; // Recupera o último ID salvo
  const idade = document.getElementById('idade').value;
  const peso = document.getElementById('peso').value;
  const endereco = document.getElementById('endereco').value;
  const raca = document.getElementById('raca').value;
  const whatsapp = document.getElementById('whatsapp').value;
  const personalidade = document.getElementById('personalidade').value;
  const descricao = document.getElementById('descricao').value;
  const foto = document.getElementById('foto').files[0];

  if (foto) {
    const reader = new FileReader();
    reader.onloadend = function() {
      const fotoBase64 = reader.result;

      let animais = JSON.parse(localStorage.getItem('animais')) || [];

      id++; // Incrementa o ID antes de usá-lo

      animais.push({
        id: id,
        nome: nome,
        idade: idade,
        peso: peso,
        endereco: endereco,
        raca: raca,
        whatsapp: whatsapp,
        personalidade: personalidade,
        descricao: descricao,
        foto: fotoBase64
      });

      localStorage.setItem('animais', JSON.stringify(animais));
      localStorage.setItem('lastAnimalId', id); // Atualiza o último ID usado

      window.location.href = 'meus_cachorros.html';
    };
    reader.readAsDataURL(foto);
  } else {
    alert('Por favor, selecione uma foto do animal.');
  }
}

  </script>
</body>

</html> 
